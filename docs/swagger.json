{
   "swagger":"2.0",
   "info":{
      "version":"v1",
      "title":"SwissRETS API"
   },
   "paths":{
      "/api/meta":{
         "get":{
            "tags":[
               "Import"
            ],
            "summary":"Returns metadata about supported functionality of this endpoint.",
            "operationId":"GetMeta",
            "consumes":[

            ],
            "produces":[
               "text/plain",
               "application/json",
               "text/json",
               "application/xml",
               "text/xml"
            ],
            "parameters":[

            ],
            "responses":{
               "200":{
                  "description":"Success",
                  "schema":{
                     "$ref":"#/definitions/MetaInfoRespDto"
                  }
               }
            }
         }
      },
      "/api/owners/{ownerId}/imports":{
         "post":{
            "tags":[
               "Import"
            ],
            "summary":"Initiates an import and returns a new import identifier. The import data is expected as multipart content.",
            "operationId":"PostAsync",
            "consumes":[
               "multipart/form-data"
            ],
            "produces":[
               "text/plain",
               "application/json",
               "text/json",
               "application/xml",
               "text/xml"
            ],
            "parameters":[
               {
                  "name":"ownerId",
                  "in":"path",
                  "description":"The owner identifier.",
                  "required":true,
                  "type":"string"
               },
               {
                  "name":"StatusChangeCallbackUri",
                  "in":"formData",
                  "required":false,
                  "type":"string"
               }
            ],
            "responses":{
               "200":{
                  "description":"Success",
                  "schema":{
                     "$ref":"#/definitions/ImportStatusRespDto"
                  }
               },
               "400":{
                  "description":"Bad Request",
                  "schema":{
                     "$ref":"#/definitions/ActionResult"
                  }
               },
               "403":{
                  "description":"Forbidden",
                  "schema":{
                     "$ref":"#/definitions/ActionResult"
                  }
               },
               "404":{
                  "description":"Not Found",
                  "schema":{
                     "$ref":"#/definitions/NotFoundResult"
                  }
               }
            }
         }
      },
      "/api/owners/{ownerId}/imports/{importIdentifier}/status":{
         "get":{
            "tags":[
               "Import"
            ],
            "summary":"Returns status information for the specified import identifier.",
            "operationId":"GetStatusAsync",
            "consumes":[

            ],
            "produces":[
               "text/plain",
               "application/json",
               "text/json",
               "application/xml",
               "text/xml"
            ],
            "parameters":[
               {
                  "name":"ownerId",
                  "in":"path",
                  "description":"The owner identifier.",
                  "required":true,
                  "type":"string"
               },
               {
                  "name":"importIdentifier",
                  "in":"path",
                  "description":"The import identifier.",
                  "required":true,
                  "type":"string"
               }
            ],
            "responses":{
               "200":{
                  "description":"Success",
                  "schema":{
                     "$ref":"#/definitions/ImportStatusRespDto"
                  }
               },
               "400":{
                  "description":"Bad Request",
                  "schema":{
                     "$ref":"#/definitions/ActionResult"
                  }
               },
               "403":{
                  "description":"Forbidden",
                  "schema":{
                     "$ref":"#/definitions/ActionResult"
                  }
               },
               "404":{
                  "description":"Not Found",
                  "schema":{
                     "$ref":"#/definitions/NotFoundResult"
                  }
               }
            }
         }
      },
      "/api/owners/{ownerId}/imports/validate":{
         "get":{
            "tags":[
               "Import"
            ],
            "summary":"Returns validation information for the uploaded SwissRETS file.",
            "operationId":"GetValidationResultAsync",
            "consumes":[

            ],
            "produces":[
               "text/plain",
               "application/json",
               "text/json",
               "application/xml",
               "text/xml"
            ],
            "parameters":[
               {
                  "name":"ownerId",
                  "in":"path",
                  "description":"The owner identifier.",
                  "required":true,
                  "type":"string"
               }
            ],
            "responses":{
               "200":{
                  "description":"Success",
                  "schema":{
                     "$ref":"#/definitions/ValidationResultRespDto"
                  }
               },
               "400":{
                  "description":"Bad Request",
                  "schema":{
                     "$ref":"#/definitions/ActionResult"
                  }
               },
               "403":{
                  "description":"Forbidden",
                  "schema":{
                     "$ref":"#/definitions/ActionResult"
                  }
               }
            }
         }
      },
      "/api/userinfo":{
         "get":{
            "tags":[
               "Import"
            ],
            "summary":"A protected endpoint for authentication testing purposes. Returns information about the currently authenticated user.",
            "operationId":"Protected",
            "consumes":[

            ],
            "produces":[
               "text/plain",
               "application/json",
               "text/json",
               "application/xml",
               "text/xml"
            ],
            "parameters":[

            ],
            "responses":{
               "200":{
                  "description":"Success",
                  "schema":{
                     "$ref":"#/definitions/UserInfoDto"
                  }
               }
            }
         }
      },
      "/api/users/authorize":{
         "post":{
            "tags":[
               "Import"
            ],
            "operationId":"AuthorizeAsync",
            "consumes":[
               "application/json-patch+json",
               "application/json",
               "text/json",
               "application/*+json",
               "application/xml",
               "text/xml",
               "application/*+xml"
            ],
            "produces":[
               "text/plain",
               "application/json",
               "text/json",
               "application/xml",
               "text/xml"
            ],
            "parameters":[
               {
                  "name":"requestDto",
                  "in":"body",
                  "required":false,
                  "schema":{
                     "$ref":"#/definitions/AuthorizationReqDto"
                  }
               }
            ],
            "responses":{
               "200":{
                  "description":"Success",
                  "schema":{
                     "$ref":"#/definitions/AuthorizationRespDto"
                  }
               },
               "401":{
                  "description":"Unauthorized",
                  "schema":{
                     "$ref":"#/definitions/IActionResult"
                  }
               },
               "400":{
                  "description":"Bad Request",
                  "schema":{
                     "$ref":"#/definitions/IActionResult"
                  }
               }
            }
         }
      }
   },
   "definitions":{
      "MetaInfoRespDto":{
         "type":"object",
         "properties":{
            "acceptsSwissRetsMajorVersions":{
               "uniqueItems":false,
               "type":"array",
               "items":{
                  "format":"int32",
                  "type":"integer"
               }
            },
            "isInMaintenanceMode":{
               "type":"boolean"
            },
            "supportsLocalAssets":{
               "type":"boolean"
            },
            "uploadSupportedMimeTypes":{
               "uniqueItems":false,
               "type":"array",
               "items":{
                  "type":"string"
               }
            }
         }
      },
      "ImportStatusRespDto":{
         "type":"object",
         "properties":{
            "importId":{
               "type":"string"
            },
            "status":{
               "enum":[
                  "None",
                  "Processing",
                  "Failed",
                  "Completed"
               ],
               "type":"string"
            },
            "importStatistics":{
               "$ref":"#/definitions/ImportStatisticsRespDto"
            }
         }
      },
      "ImportStatisticsRespDto":{
         "type":"object",
         "properties":{
            "totalPropertiesImportedSuccess":{
               "format":"int32",
               "type":"integer"
            },
            "totalPropertiesImportedFailed":{
               "format":"int32",
               "type":"integer"
            },
            "totalAssetsImportedSuccess":{
               "format":"int32",
               "type":"integer"
            },
            "totalAssetsImportedFailed":{
               "format":"int32",
               "type":"integer"
            },
            "processingMessages":{
               "uniqueItems":false,
               "type":"array",
               "items":{
                  "$ref":"#/definitions/LogRespDto"
               }
            }
         }
      },
      "LogRespDto":{
         "type":"object",
         "properties":{
            "level":{
               "enum":[
                  "Info",
                  "Warn",
                  "Error"
               ],
               "type":"string"
            },
            "errorCode":{
               "enum":[
                  "None",
                  "XmlSchemaValidationFailed",
                  "UnsupportedSwissRetsSchemaVersion",
                  "ImportFileNotFound",
                  "InvalidFileExtension",
                  "AssetNotFound",
                  "OwnerNotFound",
                  "UserNotAuthorized",
                  "ConcurrentImportFound",
                  "AttachmentImportFailed",
                  "PropertyHasNoAddress",
                  "NotEnoughImages",
                  "GeneralError"
               ],
               "type":"string"
            },
            "objectRefId":{
               "type":"string"
            },
            "objectType":{
               "enum":[
                  "Project",
                  "Unit",
                  "Property"
               ],
               "type":"string"
            },
            "message":{
               "type":"string"
            }
         }
      },
      "ActionResult":{
         "type":"object",
         "properties":{

         }
      },
      "NotFoundResult":{
         "type":"object",
         "properties":{
            "statusCode":{
               "format":"int32",
               "type":"integer",
               "readOnly":true
            }
         }
      },
      "ValidationResultRespDto":{
         "type":"object",
         "properties":{
            "isValid":{
               "type":"boolean"
            },
            "validationMessages":{
               "uniqueItems":false,
               "type":"array",
               "items":{
                  "$ref":"#/definitions/LogRespDto"
               }
            }
         }
      },
      "UserInfoDto":{
         "type":"object",
         "properties":{
            "name":{
               "type":"string"
            },
            "id":{
               "format":"int64",
               "type":"integer"
            }
         }
      },
      "AuthorizationReqDto":{
         "type":"object",
         "properties":{
            "clientId":{
               "type":"string"
            },
            "clientSecret":{
               "type":"string"
            },
            "userName":{
               "type":"string"
            },
            "password":{
               "type":"string"
            }
         }
      },
      "AuthorizationRespDto":{
         "type":"object",
         "properties":{
            "accessToken":{
               "type":"string"
            },
            "expiresInSecs":{
               "format":"int32",
               "type":"integer"
            },
            "isError":{
               "type":"boolean"
            },
            "errorDescription":{
               "type":"string"
            }
         }
      },
      "IActionResult":{
         "type":"object",
         "properties":{

         }
      }
   },
   "securityDefinitions":{
      "Bearer":{
         "name":"Authorization",
         "in":"header",
         "type":"apiKey",
         "description":"Standard Authorization header using the Bearer scheme. Example: \"bearer {token}\""
      }
   },
   "security":[
      {
         "Bearer":[

         ]
      }
   ]
}
